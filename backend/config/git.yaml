git:
  integrator_path: "./integrator"  # Legacy single-project path (deprecated)
  integration_path: "./integration"  # NEW: Multi-project container path
  default_branch: "main"
  
  # Timeouts for different operations (in seconds)
  timeouts:
    clone: 600        # 10 minutes for clone
    fetch: 120        # 2 minutes for fetch
    pull: 300         # 5 minutes for pull
    push: 300         # 5 minutes for push
    default: 300      # 5 minutes for other operations
  
  # Repository size limits
  max_repo_size_mb: 500
  
  # Allowed Git hosts (whitelist for security)
  allowed_hosts:
    - "github.com"
    - "gitlab.com"
    - "gitlab.ea.com"  # EA internal GitLab
    - "bitbucket.org"
    - "gitea.com"
  
  # Credential management
  credentials:
    store_temporarily: true
    use_credential_helper: true
    environment_variables:
      username: "GIT_USERNAME"
      password: "GIT_PASSWORD"
      token: "GIT_TOKEN"
  
  # Security settings
  security:
    validate_urls: true
    whitelist_hosts: true
    sanitize_errors: true
    prevent_command_injection: true
  
  # Operation limits
  limits:
    max_concurrent_operations: 3
    rate_limit_per_minute: 10
  
  # Logging
  logging:
    log_commands: true
    log_errors: true
    sanitize_credentials: true
  
  # Git Submodules Configuration
  # Automatically initialize and update submodules after cloning
  submodules:
    enabled: true  # Set to false to disable automatic submodule initialization
    
    # Commands to run after clone (executed in sequence)
    # Each command can have a 'path' (cd to that directory first) and 'commands' (list of git commands)
    init_sequence:
      # Step 1: Initialize all submodules from root
      - path: "."
        commands:
          - "git submodule init"
          - "git submodule update"
      
      # Step 2: Initialize nested submodules in Externals/CadieProtos
      - path: "Externals/CadieProtos"
        commands:
          - "git submodule init"
          - "git submodule update"
      
      # Step 3: Initialize specific submodules in opt/monorepo
      - path: "opt/monorepo"
        commands:
          - "git submodule init -- lib/protoc-gen-validate"
          - "git submodule update -- lib/protoc-gen-validate"
          - "git submodule init -- lib/typelib"
          - "git submodule update -- lib/typelib"
    
    # Timeout for submodule operations (in seconds)
    timeout: 600  # 10 minutes
    
    # Continue on error (if true, errors in submodule init won't fail the whole clone)
    continue_on_error: true
    
    # Log submodule operations
    log_operations: true